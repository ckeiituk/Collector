<h2>One-time Subscriptions (Loans)</h2>
<table class="details-table">
  <thead>
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Description</th>
    <th>Amount</th>
    <th>Period</th>
    <th class="actions">Actions</th> <!-- Добавлен класс actions -->
  </tr>
  </thead>
  <tbody>
  {% for subscription in one_time_subscriptions %}
  {% if not subscription.is_paused %}
  <tr>
    <td>{{ subscription.id }}</td>
    <td>{{ subscription.name }}</td>
    <td>{{ subscription.description }}</td>
    <td>{{ subscription.monthly_amount }} RUB</td>
    <td>{{ subscription.period }}</td>
    <td class="actions">
      <button type="button" class="action-button" data-tippy-content="Edit" onclick="loadEditForm('subscription', '{{ subscription.id }}')">
        <i class="fas fa-edit"></i>
      </button>
      <button type="button" class="action-button" data-tippy-content="Pause" onclick="toggleSubscriptionPause({{ subscription.id }})">
        <i class="fas fa-pause"></i>
      </button>
      <button type="button" class="action-button" data-tippy-content="Delete" onclick="deleteSubscription({{ subscription.id }})">
        <i class="fas fa-trash"></i>
      </button>
      <button type="button" class="action-button" data-tippy-content="Attach" onclick="openAttachUserForm('subscription', '{{ subscription.id }}')">
        <i class="fas fa-user-plus"></i>
      </button>
      <button class="toggle-button action-button" data-tippy-content="Users" onclick="toggleDetails('details-users-{{ subscription.id }}')">
        <i class="fas fa-users"></i>
      </button>
    </td>
  </tr>
  <tr>
    <td colspan="6">
      <details id="details-users-{{ subscription.id }}" class="table-details">
        <summary><i class="fas fa-users"></i> Users:</summary>
        <ul>
          {% for user_subscription in subscription.user_subscriptions %}
          <li>
            {{ user_subscription.user.name }} - {{ user_subscription.amount }} RUB
            <button type="button" class="action-button" data-tippy-content="Detach" onclick="detachUserFromSubscription({{ user_subscription.id }}, {{ subscription.id }})">
              <i class="fas fa-unlink"></i>
            </button>
          </li>
          {% endfor %}
        </ul>
      </details>
    </td>
  </tr>
  {% endif %}
  {% endfor %}
  </tbody>
</table>

<h2>Archived One-time Subscriptions (Loans)</h2>
<table class="details-table">
  <thead>
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Description</th>
    <th>Amount</th>
    <th>Period</th>
    <th class="actions">Actions</th> <!-- Добавлен класс actions -->
  </tr>
  </thead>
  <tbody>
  {% for subscription in one_time_subscriptions %}
  {% if subscription.is_paused %}
  <tr>
    <td>{{ subscription.id }}</td>
    <td>{{ subscription.name }}</td>
    <td>{{ subscription.description }}</td>
    <td>{{ subscription.monthly_amount }} RUB</td>
    <td>{{ subscription.period }}</td>
    <td class="actions">
      <button type="button" class="action-button" data-tippy-content="Edit" onclick="loadEditForm('subscription', '{{ subscription.id }}')">
        <i class="fas fa-edit"></i>
      </button>
      <button type="button" class="action-button" data-tippy-content="Resume" onclick="toggleSubscriptionPause({{ subscription.id }})">
        <i class="fas fa-play"></i>
      </button>
      <button type="button" class="action-button" data-tippy-content="Delete" onclick="deleteSubscription({{ subscription.id }})">
        <i class="fas fa-trash"></i>
      </button>
      <button type="button" class="action-button" data-tippy-content="Attach" onclick="openAttachUserForm('subscription', '{{ subscription.id }}')">
        <i class="fas fa-user-plus"></i>
      </button>
      <button class="toggle-button action-button" data-tippy-content="Users" onclick="toggleDetails('details-users-{{ subscription.id }}')">
        <i class="fas fa-users"></i>
      </button>
    </td>
  </tr>
  <tr>
    <td colspan="6">
      <details id="details-users-{{ subscription.id }}" class="table-details">
        <summary><i class="fas fa-users"></i> Users:</summary>
        <ul>
          {% for user_subscription in subscription.user_subscriptions %}
          <li>
            {{ user_subscription.user.name }} - {{ user_subscription.amount }} RUB
            <button type="button" class="action-button" data-tippy-content="Detach" onclick="detachUserFromSubscription({{ user_subscription.id }}, {{ subscription.id }})">
              <i class="fas fa-unlink"></i>
            </button>
          </li>
          {% endfor %}
        </ul>
      </details>
    </td>
  </tr>
  {% endif %}
  {% endfor %}
  </tbody>
</table>
